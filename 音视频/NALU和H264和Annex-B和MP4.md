NALU（Network Abstraction Layer Unit）和H.264（也称为AVC，即Advanced Video Coding）之间的关系是构成和结构上的。H.264是一种视频压缩编码标准，而NALU是H.264标准定义中的一种数据包装单元，用于封装编码后的视频数据。

### H.264 和 NALU 的关系：
- H.264编码过程：在H.264编码视频时，原始视频帧（像I帧、P帧、B帧）被压缩并转换成一系列编码帧。
- NALU：这些编码帧随后被封装成NALU，以便于网络传输或其他形式的分发。每个NALU包含一个头部和有效负载，头部定义了NALU的类型（如它是否是一个I帧、P帧或其他类型的帧）。
### Annex-B 和 NALU 的关系：
- Annex-B封装格式：H.264标准中的Annex-B定义了一种流媒体传输中NALU的封装格式。在Annex-B格式中，每个NALU前面都有一个特定的起始码，一般为`0x000001`或`0x00000001`，用于标识NALU的开始，这使得在流媒体中可以轻易地定位和分割NALU。
- 流式传输：因此，NALU通常以Annex-B的形式出现在如RTSP或HLS这样的流式协议中。
### MP4 和 NALU 的关系：
- MP4封装格式：MP4（来自MPEG-4 Part 14标准）是一种常见的多媒体文件封装格式，它可以容纳H.264编码的视频。在MP4文件中，NALU被嵌入到MP4文件结构中的不同box（盒）内，不再使用Annex-B格式的起始码。
- 文件存储：MP4更常用于文件存储和传输，如可下载的视频文件或用于视频点播服务。
简而言之，NALU是H.264视频数据的包装形式，Annex-B是NALU在流媒体传输中的一种特定封装方式，而MP4则是另一种封装方式，适合文件存储和传输。这些层次和格式共同工作，允许H.264编码的视频在不同环境下有效地存储、传输和播放。
